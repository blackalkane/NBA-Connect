"use strict";exports.__esModule=!0,exports.default=exports.Select=void 0;var _styledBase=_interopRequireDefault(require("@emotion/styled-base")),_react=_interopRequireWildcard(require("react")),_reactDom=_interopRequireDefault(require("react-dom")),_propTypes=_interopRequireDefault(require("prop-types")),_ClickOutside=_interopRequireDefault(require("./components/ClickOutside")),_Content=_interopRequireDefault(require("./components/Content")),_Dropdown=_interopRequireDefault(require("./components/Dropdown")),_Loading=_interopRequireDefault(require("./components/Loading")),_Clear=_interopRequireDefault(require("./components/Clear")),_Separator=_interopRequireDefault(require("./components/Separator")),_DropdownHandle=_interopRequireDefault(require("./components/DropdownHandle")),_util=require("./util"),_constants=require("./constants");function _interopRequireWildcard(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var d=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(a,c):{};d.get||d.set?Object.defineProperty(b,c,d):b[c]=a[c]}return b.default=a,b}function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inheritsLoose(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.__proto__=b}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var Select=/*#__PURE__*/function(a){function b(b){var c;return c=a.call(this,b)||this,_defineProperty(_assertThisInitialized(c),"onDropdownClose",function(){c.setState({cursor:null}),c.props.onDropdownClose()}),_defineProperty(_assertThisInitialized(c),"onScroll",function(){c.props.closeOnScroll&&c.dropDown("close"),c.updateSelectBounds()}),_defineProperty(_assertThisInitialized(c),"updateSelectBounds",function(){return c.select.current&&c.setState({selectBounds:c.select.current.getBoundingClientRect()})}),_defineProperty(_assertThisInitialized(c),"getSelectBounds",function(){return c.state.selectBounds}),_defineProperty(_assertThisInitialized(c),"dropDown",function(a,b){return void 0===a&&(a="toggle"),c.props.portal&&!c.props.closeOnScroll&&!c.props.closeOnSelect&&b&&b.srcElement&&b.srcElement.offsetParent&&b.srcElement.offsetParent.classList.contains("react-dropdown-select-dropdown")?void 0:c.props.keepOpen?c.setState({dropdown:!0}):"close"===a&&c.state.dropdown?(c.select.current.blur(),c.setState({dropdown:!1,search:c.props.clearOnBlur?"":c.state.search})):"open"!==a||c.state.dropdown?"toggle"===a&&(c.select.current.focus(),c.setState({dropdown:!c.state.dropdown})):c.setState({dropdown:!0})}),_defineProperty(_assertThisInitialized(c),"getSelectRef",function(){return c.select.current}),_defineProperty(_assertThisInitialized(c),"addItem",function(a){if(c.props.multi){if(-1!==c.state.values.indexOf(a))return c.removeItem(null,a,!1);c.setState({values:[].concat(c.state.values,[a])})}else c.setState({values:[a],dropdown:!1});return c.props.clearOnSelect&&c.setState({search:""}),!0}),_defineProperty(_assertThisInitialized(c),"removeItem",function(a,b,d){void 0===d&&(d=!1),a&&d&&(a.preventDefault(),a.stopPropagation(),c.dropDown("close")),c.setState({values:c.state.values.filter(function(a){return a[c.props.valueField]!==b[c.props.valueField]})})}),_defineProperty(_assertThisInitialized(c),"setSearch",function(a){c.setState({cursor:null}),c.setState({search:a.target.value})}),_defineProperty(_assertThisInitialized(c),"getInputSize",function(){return c.state.search?c.state.search.length:0<c.state.values.length?c.props.addPlaceholder.length:c.props.placeholder.length}),_defineProperty(_assertThisInitialized(c),"toggleSelectAll",function(){return c.setState({values:0===c.state.values.length?c.selectAll():c.clearAll()})}),_defineProperty(_assertThisInitialized(c),"clearAll",function(){c.props.onClearAll(),c.setState({values:[]})}),_defineProperty(_assertThisInitialized(c),"selectAll",function(){return c.props.onSelectAll(),c.setState({values:c.props.options.filter(function(a){return!a.disabled})})}),_defineProperty(_assertThisInitialized(c),"isSelected",function(a){return!!c.state.values.find(function(b){return b[c.props.valueField]===a[c.props.valueField]})}),_defineProperty(_assertThisInitialized(c),"areAllSelected",function(){return c.state.values.length===c.props.options.filter(function(a){return!a.disabled}).length}),_defineProperty(_assertThisInitialized(c),"safeString",function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}),_defineProperty(_assertThisInitialized(c),"sortBy",function(){var a=c.props,d=a.sortBy,e=a.labelField,f=a.options;return d?f.sort(function(c,a){var b,g,h=c[d],i=a[d];return void 0===c[d]||void 0===i?f:h&&"number"==typeof h?(b=c[h?d:e],g=a[i?d:e],b-g):(b=(c[h?d:e]+"").toLowerCase(),g=(a[i?d:e]+"").toLowerCase(),b<g?-1:b>g?1:0)}):f}),_defineProperty(_assertThisInitialized(c),"searchFn",function(a){var b=a.state,c=a.props,d=a.methods,e=new RegExp(d.safeString(b.search),"i");return d.sortBy(c.options).filter(function(a){return e.test(a[c.searchBy]||a[c.labelField])})}),_defineProperty(_assertThisInitialized(c),"searchResults",function(){var a={state:c.state,props:c.props,methods:c.methods};return c.props.searchFn(a)||c.searchFn(a)}),_defineProperty(_assertThisInitialized(c),"activeCursorItem",function(a){return c.setState({activeCursorItem:a})}),_defineProperty(_assertThisInitialized(c),"handleKeyDown",function(a){var b=c.state.cursor;if("ArrowDown"===a.key&&null===b)return c.setState({cursor:0});if(("ArrowUp"===a.key||"ArrowDown"===a.key)&&a.preventDefault(),"Escape"===a.key&&c.dropDown("close"),"Enter"===a.key){var d=c.searchResults()[b];d&&!d.disabled&&c.addItem(d)}return("ArrowUp"===a.key&&0<b&&c.setState(function(a){return{cursor:a.cursor-1}}),"ArrowUp"===a.key&&0===b&&c.setState({cursor:c.searchResults().length}),"ArrowDown"===a.key&&c.setState(function(a){return{cursor:a.cursor+1}}),"ArrowDown"===a.key&&c.searchResults().length===b)?c.setState({cursor:0}):void 0}),_defineProperty(_assertThisInitialized(c),"renderDropdown",function(){return c.props.portal?_reactDom.default.createPortal(_react.default.createElement(_Dropdown.default,{props:c.props,state:c.state,methods:c.methods}),c.dropdownRoot):_react.default.createElement(_Dropdown.default,{props:c.props,state:c.state,methods:c.methods})}),_defineProperty(_assertThisInitialized(c),"createNew",function(a){var b,d=(b={},b[c.props.labelField]=a,b[c.props.valueField]=a,b);c.addItem(d),c.props.onCreateNew(d),c.setState({search:""})}),c.state={dropdown:!1,values:b.values,search:"",selectBounds:{},cursor:null},c.methods={removeItem:c.removeItem,dropDown:c.dropDown,addItem:c.addItem,setSearch:c.setSearch,getInputSize:c.getInputSize,toggleSelectAll:c.toggleSelectAll,clearAll:c.clearAll,selectAll:c.selectAll,searchResults:c.searchResults,getSelectRef:c.getSelectRef,isSelected:c.isSelected,getSelectBounds:c.getSelectBounds,areAllSelected:c.areAllSelected,handleKeyDown:c.handleKeyDown,activeCursorItem:c.activeCursorItem,createNew:c.createNew,sortBy:c.sortBy,safeString:c.safeString},c.select=_react.default.createRef(),c.dropdownRoot="undefined"!=typeof document&&document.createElement("div"),c}_inheritsLoose(b,a);var c=b.prototype;return c.componentDidMount=function componentDidMount(){this.props.portal&&this.props.portal.appendChild(this.dropdownRoot),window.addEventListener("resize",(0,_util.debounce)(this.updateSelectBounds)),window.addEventListener("scroll",(0,_util.debounce)(this.onScroll)),this.props.onChange(this.state.values),this.dropDown("close"),this.select&&this.updateSelectBounds()},c.componentDidUpdate=function componentDidUpdate(a,b){!(0,_util.isEqual)(a.values,this.props.values)&&(0,_util.isEqual)(a.values,b.values)&&(this.props.onChange(this.state.values),this.setState({values:this.props.values}),this.updateSelectBounds()),b.values!==this.state.values&&(this.props.onChange(this.state.values),this.updateSelectBounds()),b.search!==this.state.search&&this.updateSelectBounds(),b.values!==this.state.values&&this.props.closeOnSelect&&this.dropDown("close"),a.multi!==this.props.multi&&this.updateSelectBounds(),b.dropdown&&b.dropdown!==this.state.dropdown&&this.onDropdownClose(),b.dropdown||b.dropdown===this.state.dropdown||this.props.onDropdownOpen()},c.componentWillUnmount=function componentWillUnmount(){this.props.portal&&this.props.portal.removeChild(this.dropdownRoot),window.removeEventListener("resize",(0,_util.debounce)(this.updateSelectBounds,this.props.debounceDelay)),window.removeEventListener("scroll",(0,_util.debounce)(this.onScroll,this.props.debounceDelay))},c.render=function render(){var a=this;return _react.default.createElement(_ClickOutside.default,{onClickOutside:function onClickOutside(b){return a.dropDown("close",b)}},_react.default.createElement(ReactDropdownSelect,{onKeyDown:this.handleKeyDown,onClick:function onClick(b){return a.dropDown("open",b)},tabIndex:"0",direction:this.props.direction,style:this.props.style,ref:this.select,disabled:this.props.disabled,className:_constants.LIB_NAME+" "+this.props.className,color:this.props.color},_react.default.createElement(_Content.default,{props:this.props,state:this.state,methods:this.methods}),this.props.name&&_react.default.createElement("input",{name:this.props.name,type:"hidden",value:this.props.values}),this.props.loading&&_react.default.createElement(_Loading.default,{props:this.props}),this.props.clearable&&_react.default.createElement(_Clear.default,{props:this.props,state:this.state,methods:this.methods}),this.props.separator&&_react.default.createElement(_Separator.default,{props:this.props,state:this.state,methods:this.methods}),this.props.dropdownHandle&&_react.default.createElement(_DropdownHandle.default,{onClick:function onClick(){return a.select.current.focus()},props:this.props,state:this.state,methods:this.methods}),this.state.dropdown&&this.renderDropdown()))},b}(_react.Component);exports.Select=Select,Select.defaultProps={addPlaceholder:"",placeholder:"Select...",values:[],options:[],multi:!1,disabled:!1,searchBy:"label",sortBy:null,clearable:!1,searchable:!0,dropdownHandle:!0,separator:!1,keepOpen:void 0,noDataLabel:"No data",createNewLabel:"add {search}",disabledLabel:"disabled",dropdownGap:5,closeOnScroll:!1,debounceDelay:0,labelField:"label",valueField:"value",color:"#0074D9",keepSelectedInList:!0,closeOnSelect:!1,clearOnBlur:!0,clearOnSelect:!0,dropdownPosition:"bottom",dropdownHeight:"300px",autoFocus:!1,portal:null,create:!1,direction:"ltr",name:null,onChange:function onChange(){},onDropdownOpen:function onDropdownOpen(){},onDropdownClose:function onDropdownClose(){},onClearAll:function onClearAll(){},onSelectAll:function onSelectAll(){},onCreateNew:function onCreateNew(){},searchFn:function searchFn(){}};var ReactDropdownSelect=(0,_styledBase.default)("div",{target:"e1gzf2xs0",label:"ReactDropdownSelect"})("position:relative;display:flex;border:1px solid #ccc;width:100%;border-radius:2px;padding:2px 5px;flex-direction:row;direction:",function(a){var b=a.direction;return b},";align-items:center;min-height:36px;",function(a){var b=a.disabled;return b?"cursor: not-allowed;pointer-events: none;opacity: 0.3;":"pointer-events: all;"},":hover,:focus-within{border-color:",function(a){var b=a.color;return b},";}:focus,:focus-within{outline:0;box-shadow:0 0 0 3px ",function(a){var b=a.color;return(0,_util.hexToRGBA)(b,.2)},";}"+("production"===process.env.NODE_ENV?"":"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF1Z0JzQyIsImZpbGUiOiIuLi9zcmMvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuaW1wb3J0IENsaWNrT3V0c2lkZSBmcm9tICcuL2NvbXBvbmVudHMvQ2xpY2tPdXRzaWRlJztcblxuaW1wb3J0IENvbnRlbnQgZnJvbSAnLi9jb21wb25lbnRzL0NvbnRlbnQnO1xuaW1wb3J0IERyb3Bkb3duIGZyb20gJy4vY29tcG9uZW50cy9Ecm9wZG93bic7XG5pbXBvcnQgTG9hZGluZyBmcm9tICcuL2NvbXBvbmVudHMvTG9hZGluZyc7XG5pbXBvcnQgQ2xlYXIgZnJvbSAnLi9jb21wb25lbnRzL0NsZWFyJztcbmltcG9ydCBTZXBhcmF0b3IgZnJvbSAnLi9jb21wb25lbnRzL1NlcGFyYXRvcic7XG5pbXBvcnQgRHJvcGRvd25IYW5kbGUgZnJvbSAnLi9jb21wb25lbnRzL0Ryb3Bkb3duSGFuZGxlJztcblxuaW1wb3J0IHsgZGVib3VuY2UsIGhleFRvUkdCQSwgaXNFcXVhbCB9IGZyb20gJy4vdXRpbCc7XG5pbXBvcnQgeyBMSUJfTkFNRSB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGNsYXNzIFNlbGVjdCBleHRlbmRzIENvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLmlzUmVxdWlyZWQsXG4gICAgb25Ecm9wZG93bkNsb3NlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvbkRyb3Bkb3duT3BlbjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25DbGVhckFsbDogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25TZWxlY3RBbGw6IFByb3BUeXBlcy5mdW5jLFxuICAgIHZhbHVlczogUHJvcFR5cGVzLmFycmF5LFxuICAgIG9wdGlvbnM6IFByb3BUeXBlcy5hcnJheS5pc1JlcXVpcmVkLFxuICAgIGtlZXBPcGVuOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBkcm9wZG93bkdhcDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBtdWx0aTogUHJvcFR5cGVzLmJvb2wsXG4gICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgYWRkUGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgZGlzYWJsZWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBsb2FkaW5nOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBjbGVhcmFibGU6IFByb3BUeXBlcy5ib29sLFxuICAgIHNlYXJjaGFibGU6IFByb3BUeXBlcy5ib29sLFxuICAgIHNlcGFyYXRvcjogUHJvcFR5cGVzLmJvb2wsXG4gICAgZHJvcGRvd25IYW5kbGU6IFByb3BUeXBlcy5ib29sLFxuICAgIHNlYXJjaEJ5OiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHNvcnRCeTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjbG9zZU9uU2Nyb2xsOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBvcGVuT25Ub3A6IFByb3BUeXBlcy5ib29sLFxuICAgIHN0eWxlOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGNvbnRlbnRSZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgZHJvcGRvd25SZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgaXRlbVJlbmRlcmVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBub0RhdGFSZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb3B0aW9uUmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIGlucHV0UmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIGxvYWRpbmdSZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgY2xlYXJSZW5kZXJlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgc2VwYXJhdG9yUmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIGRyb3Bkb3duSGFuZGxlUmVuZGVyZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIGRpcmVjdGlvbjogUHJvcFR5cGVzLnN0cmluZ1xuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGRyb3Bkb3duOiBmYWxzZSxcbiAgICAgIHZhbHVlczogcHJvcHMudmFsdWVzLFxuICAgICAgc2VhcmNoOiAnJyxcbiAgICAgIHNlbGVjdEJvdW5kczoge30sXG4gICAgICBjdXJzb3I6IG51bGxcbiAgICB9O1xuXG4gICAgdGhpcy5tZXRob2RzID0ge1xuICAgICAgcmVtb3ZlSXRlbTogdGhpcy5yZW1vdmVJdGVtLFxuICAgICAgZHJvcERvd246IHRoaXMuZHJvcERvd24sXG4gICAgICBhZGRJdGVtOiB0aGlzLmFkZEl0ZW0sXG4gICAgICBzZXRTZWFyY2g6IHRoaXMuc2V0U2VhcmNoLFxuICAgICAgZ2V0SW5wdXRTaXplOiB0aGlzLmdldElucHV0U2l6ZSxcbiAgICAgIHRvZ2dsZVNlbGVjdEFsbDogdGhpcy50b2dnbGVTZWxlY3RBbGwsXG4gICAgICBjbGVhckFsbDogdGhpcy5jbGVhckFsbCxcbiAgICAgIHNlbGVjdEFsbDogdGhpcy5zZWxlY3RBbGwsXG4gICAgICBzZWFyY2hSZXN1bHRzOiB0aGlzLnNlYXJjaFJlc3VsdHMsXG4gICAgICBnZXRTZWxlY3RSZWY6IHRoaXMuZ2V0U2VsZWN0UmVmLFxuICAgICAgaXNTZWxlY3RlZDogdGhpcy5pc1NlbGVjdGVkLFxuICAgICAgZ2V0U2VsZWN0Qm91bmRzOiB0aGlzLmdldFNlbGVjdEJvdW5kcyxcbiAgICAgIGFyZUFsbFNlbGVjdGVkOiB0aGlzLmFyZUFsbFNlbGVjdGVkLFxuICAgICAgaGFuZGxlS2V5RG93bjogdGhpcy5oYW5kbGVLZXlEb3duLFxuICAgICAgYWN0aXZlQ3Vyc29ySXRlbTogdGhpcy5hY3RpdmVDdXJzb3JJdGVtLFxuICAgICAgY3JlYXRlTmV3OiB0aGlzLmNyZWF0ZU5ldyxcbiAgICAgIHNvcnRCeTogdGhpcy5zb3J0QnksXG4gICAgICBzYWZlU3RyaW5nOiB0aGlzLnNhZmVTdHJpbmdcbiAgICB9O1xuXG4gICAgdGhpcy5zZWxlY3QgPSBSZWFjdC5jcmVhdGVSZWYoKTtcbiAgICB0aGlzLmRyb3Bkb3duUm9vdCA9IHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnByb3BzLnBvcnRhbCAmJiB0aGlzLnByb3BzLnBvcnRhbC5hcHBlbmRDaGlsZCh0aGlzLmRyb3Bkb3duUm9vdCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGRlYm91bmNlKHRoaXMudXBkYXRlU2VsZWN0Qm91bmRzKSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGRlYm91bmNlKHRoaXMub25TY3JvbGwpKTtcblxuICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5zdGF0ZS52YWx1ZXMpO1xuXG4gICAgdGhpcy5kcm9wRG93bignY2xvc2UnKTtcblxuICAgIGlmICh0aGlzLnNlbGVjdCkge1xuICAgICAgdGhpcy51cGRhdGVTZWxlY3RCb3VuZHMoKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICBpZiAoXG4gICAgICAhaXNFcXVhbChwcmV2UHJvcHMudmFsdWVzLCB0aGlzLnByb3BzLnZhbHVlcykgJiZcbiAgICAgIGlzRXF1YWwocHJldlByb3BzLnZhbHVlcywgcHJldlN0YXRlLnZhbHVlcylcbiAgICApIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5zdGF0ZS52YWx1ZXMpO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHZhbHVlczogdGhpcy5wcm9wcy52YWx1ZXNcbiAgICAgIH0pO1xuICAgICAgdGhpcy51cGRhdGVTZWxlY3RCb3VuZHMoKTtcbiAgICB9XG5cbiAgICBpZiAocHJldlN0YXRlLnZhbHVlcyAhPT0gdGhpcy5zdGF0ZS52YWx1ZXMpIHtcbiAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UodGhpcy5zdGF0ZS52YWx1ZXMpO1xuICAgICAgdGhpcy51cGRhdGVTZWxlY3RCb3VuZHMoKTtcbiAgICB9XG5cbiAgICBpZiAocHJldlN0YXRlLnNlYXJjaCAhPT0gdGhpcy5zdGF0ZS5zZWFyY2gpIHtcbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0Qm91bmRzKCk7XG4gICAgfVxuXG4gICAgaWYgKHByZXZTdGF0ZS52YWx1ZXMgIT09IHRoaXMuc3RhdGUudmFsdWVzICYmIHRoaXMucHJvcHMuY2xvc2VPblNlbGVjdCkge1xuICAgICAgdGhpcy5kcm9wRG93bignY2xvc2UnKTtcbiAgICB9XG5cbiAgICBpZiAocHJldlByb3BzLm11bHRpICE9PSB0aGlzLnByb3BzLm11bHRpKSB7XG4gICAgICB0aGlzLnVwZGF0ZVNlbGVjdEJvdW5kcygpO1xuICAgIH1cblxuICAgIGlmIChwcmV2U3RhdGUuZHJvcGRvd24gJiYgcHJldlN0YXRlLmRyb3Bkb3duICE9PSB0aGlzLnN0YXRlLmRyb3Bkb3duKSB7XG4gICAgICB0aGlzLm9uRHJvcGRvd25DbG9zZSgpO1xuICAgIH1cblxuICAgIGlmICghcHJldlN0YXRlLmRyb3Bkb3duICYmIHByZXZTdGF0ZS5kcm9wZG93biAhPT0gdGhpcy5zdGF0ZS5kcm9wZG93bikge1xuICAgICAgdGhpcy5wcm9wcy5vbkRyb3Bkb3duT3BlbigpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMucHJvcHMucG9ydGFsICYmIHRoaXMucHJvcHMucG9ydGFsLnJlbW92ZUNoaWxkKHRoaXMuZHJvcGRvd25Sb290KTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICdyZXNpemUnLFxuICAgICAgZGVib3VuY2UodGhpcy51cGRhdGVTZWxlY3RCb3VuZHMsIHRoaXMucHJvcHMuZGVib3VuY2VEZWxheSlcbiAgICApO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBkZWJvdW5jZSh0aGlzLm9uU2Nyb2xsLCB0aGlzLnByb3BzLmRlYm91bmNlRGVsYXkpKTtcbiAgfVxuXG4gIG9uRHJvcGRvd25DbG9zZSA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHsgY3Vyc29yOiBudWxsIH0pO1xuICAgIHRoaXMucHJvcHMub25Ecm9wZG93bkNsb3NlKCk7XG4gIH07XG5cbiAgb25TY3JvbGwgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMucHJvcHMuY2xvc2VPblNjcm9sbCkge1xuICAgICAgdGhpcy5kcm9wRG93bignY2xvc2UnKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVNlbGVjdEJvdW5kcygpO1xuICB9O1xuXG4gIHVwZGF0ZVNlbGVjdEJvdW5kcyA9ICgpID0+XG4gICAgdGhpcy5zZWxlY3QuY3VycmVudCAmJlxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VsZWN0Qm91bmRzOiB0aGlzLnNlbGVjdC5jdXJyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgfSk7XG5cbiAgZ2V0U2VsZWN0Qm91bmRzID0gKCkgPT4gdGhpcy5zdGF0ZS5zZWxlY3RCb3VuZHM7XG5cbiAgZHJvcERvd24gPSAoYWN0aW9uID0gJ3RvZ2dsZScsIGV2ZW50KSA9PiB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5wcm9wcy5wb3J0YWwgJiZcbiAgICAgICF0aGlzLnByb3BzLmNsb3NlT25TY3JvbGwgJiZcbiAgICAgICF0aGlzLnByb3BzLmNsb3NlT25TZWxlY3QgJiZcbiAgICAgIGV2ZW50ICYmXG4gICAgICBldmVudC5zcmNFbGVtZW50ICYmXG4gICAgICBldmVudC5zcmNFbGVtZW50Lm9mZnNldFBhcmVudCAmJlxuICAgICAgZXZlbnQuc3JjRWxlbWVudC5vZmZzZXRQYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyZWFjdC1kcm9wZG93bi1zZWxlY3QtZHJvcGRvd24nKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb3BzLmtlZXBPcGVuKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7IGRyb3Bkb3duOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIGlmIChhY3Rpb24gPT09ICdjbG9zZScgJiYgdGhpcy5zdGF0ZS5kcm9wZG93bikge1xuICAgICAgdGhpcy5zZWxlY3QuY3VycmVudC5ibHVyKCk7XG5cbiAgICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZHJvcGRvd246IGZhbHNlLFxuICAgICAgICBzZWFyY2g6IHRoaXMucHJvcHMuY2xlYXJPbkJsdXIgPyAnJyA6IHRoaXMuc3RhdGUuc2VhcmNoXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoYWN0aW9uID09PSAnb3BlbicgJiYgIXRoaXMuc3RhdGUuZHJvcGRvd24pIHtcbiAgICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHsgZHJvcGRvd246IHRydWUgfSk7XG4gICAgfVxuXG4gICAgaWYgKGFjdGlvbiA9PT0gJ3RvZ2dsZScpIHtcbiAgICAgIHRoaXMuc2VsZWN0LmN1cnJlbnQuZm9jdXMoKTtcbiAgICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHsgZHJvcGRvd246ICF0aGlzLnN0YXRlLmRyb3Bkb3duIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBnZXRTZWxlY3RSZWYgPSAoKSA9PiB0aGlzLnNlbGVjdC5jdXJyZW50O1xuXG4gIGFkZEl0ZW0gPSAoaXRlbSkgPT4ge1xuICAgIGlmICh0aGlzLnByb3BzLm11bHRpKSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS52YWx1ZXMuaW5kZXhPZihpdGVtKSAhPT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlSXRlbShudWxsLCBpdGVtLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICB2YWx1ZXM6IFsuLi50aGlzLnN0YXRlLnZhbHVlcywgaXRlbV1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgdmFsdWVzOiBbaXRlbV0sXG4gICAgICAgIGRyb3Bkb3duOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5wcm9wcy5jbGVhck9uU2VsZWN0ICYmIHRoaXMuc2V0U3RhdGUoeyBzZWFyY2g6ICcnIH0pO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgcmVtb3ZlSXRlbSA9IChldmVudCwgaXRlbSwgY2xvc2UgPSBmYWxzZSkgPT4ge1xuICAgIGlmIChldmVudCAmJiBjbG9zZSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5kcm9wRG93bignY2xvc2UnKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHZhbHVlczogdGhpcy5zdGF0ZS52YWx1ZXMuZmlsdGVyKFxuICAgICAgICAodmFsdWVzKSA9PiB2YWx1ZXNbdGhpcy5wcm9wcy52YWx1ZUZpZWxkXSAhPT0gaXRlbVt0aGlzLnByb3BzLnZhbHVlRmllbGRdXG4gICAgICApXG4gICAgfSk7XG4gIH07XG5cbiAgc2V0U2VhcmNoID0gKGV2ZW50KSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBjdXJzb3I6IG51bGxcbiAgICB9KTtcblxuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc2VhcmNoOiBldmVudC50YXJnZXQudmFsdWVcbiAgICB9KTtcbiAgfTtcblxuICBnZXRJbnB1dFNpemUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuc3RhdGUuc2VhcmNoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZS5zZWFyY2gubGVuZ3RoO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlLnZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5hZGRQbGFjZWhvbGRlci5sZW5ndGg7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucHJvcHMucGxhY2Vob2xkZXIubGVuZ3RoO1xuICB9O1xuXG4gIHRvZ2dsZVNlbGVjdEFsbCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB2YWx1ZXM6IHRoaXMuc3RhdGUudmFsdWVzLmxlbmd0aCA9PT0gMCA/IHRoaXMuc2VsZWN0QWxsKCkgOiB0aGlzLmNsZWFyQWxsKClcbiAgICB9KTtcbiAgfTtcblxuICBjbGVhckFsbCA9ICgpID0+IHtcbiAgICB0aGlzLnByb3BzLm9uQ2xlYXJBbGwoKTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHZhbHVlczogW11cbiAgICB9KTtcbiAgfTtcblxuICBzZWxlY3RBbGwgPSAoKSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vblNlbGVjdEFsbCgpO1xuICAgIHJldHVybiB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHZhbHVlczogdGhpcy5wcm9wcy5vcHRpb25zLmZpbHRlcigob3B0aW9uKSA9PiAhb3B0aW9uLmRpc2FibGVkKVxuICAgIH0pO1xuICB9O1xuXG4gIGlzU2VsZWN0ZWQgPSAob3B0aW9uKSA9PlxuICAgICEhdGhpcy5zdGF0ZS52YWx1ZXMuZmluZChcbiAgICAgICh2YWx1ZSkgPT4gdmFsdWVbdGhpcy5wcm9wcy52YWx1ZUZpZWxkXSA9PT0gb3B0aW9uW3RoaXMucHJvcHMudmFsdWVGaWVsZF1cbiAgICApO1xuXG4gIGFyZUFsbFNlbGVjdGVkID0gKCkgPT5cbiAgICB0aGlzLnN0YXRlLnZhbHVlcy5sZW5ndGggPT09IHRoaXMucHJvcHMub3B0aW9ucy5maWx0ZXIoKG9wdGlvbikgPT4gIW9wdGlvbi5kaXNhYmxlZCkubGVuZ3RoO1xuXG4gIHNhZmVTdHJpbmcgPSAoc3RyaW5nKSA9PiBzdHJpbmcucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTtcblxuICBzb3J0QnkgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBzb3J0QnksIGxhYmVsRmllbGQsIG9wdGlvbnMgfSA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAoIXNvcnRCeSkge1xuICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdGlvbnMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgbGV0IGZpZWxkQTtcbiAgICAgIGxldCBmaWVsZEI7XG5cbiAgICAgIGNvbnN0IHNvcnRBID0gYVtzb3J0QnldO1xuICAgICAgY29uc3Qgc29ydEIgPSBiW3NvcnRCeV07XG5cbiAgICAgIGlmIChhW3NvcnRCeV0gPT09IHVuZGVmaW5lZCB8fCBzb3J0QiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zO1xuICAgICAgfVxuXG4gICAgICBpZiAoc29ydEEgJiYgdHlwZW9mIHNvcnRBID09PSAnbnVtYmVyJykge1xuICAgICAgICBmaWVsZEEgPSBhW3NvcnRBID8gc29ydEJ5IDogbGFiZWxGaWVsZF07XG4gICAgICAgIGZpZWxkQiA9IGJbc29ydEIgPyBzb3J0QnkgOiBsYWJlbEZpZWxkXTtcblxuICAgICAgICByZXR1cm4gZmllbGRBIC0gZmllbGRCO1xuICAgICAgfVxuXG4gICAgICBmaWVsZEEgPSBTdHJpbmcoYVtzb3J0QSA/IHNvcnRCeSA6IGxhYmVsRmllbGRdKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgZmllbGRCID0gU3RyaW5nKGJbc29ydEIgPyBzb3J0QnkgOiBsYWJlbEZpZWxkXSkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgaWYgKGZpZWxkQSA8IGZpZWxkQikge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG5cbiAgICAgIGlmIChmaWVsZEEgPiBmaWVsZEIpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAwO1xuICAgIH0pO1xuICB9O1xuXG4gIHNlYXJjaEZuID0gKHsgc3RhdGUsIHByb3BzLCBtZXRob2RzIH0pID0+IHtcbiAgICBjb25zdCByZWdleHAgPSBuZXcgUmVnRXhwKG1ldGhvZHMuc2FmZVN0cmluZyhzdGF0ZS5zZWFyY2gpLCAnaScpO1xuXG4gICAgcmV0dXJuIG1ldGhvZHMuc29ydEJ5KHByb3BzLm9wdGlvbnMpLmZpbHRlcigoaXRlbSkgPT5cbiAgICAgIHJlZ2V4cC50ZXN0KGl0ZW1bcHJvcHMuc2VhcmNoQnldIHx8IGl0ZW1bcHJvcHMubGFiZWxGaWVsZF0pXG4gICAgKTtcbiAgfTtcblxuICBzZWFyY2hSZXN1bHRzID0gKCkgPT4ge1xuICAgIGNvbnN0IGFyZ3MgPSB7IHN0YXRlOiB0aGlzLnN0YXRlLCBwcm9wczogdGhpcy5wcm9wcywgbWV0aG9kczogdGhpcy5tZXRob2RzIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5wcm9wcy5zZWFyY2hGbihhcmdzKSB8fCB0aGlzLnNlYXJjaEZuKGFyZ3MpXG4gICAgKTtcbiAgfTtcblxuICBhY3RpdmVDdXJzb3JJdGVtID0gKGFjdGl2ZUN1cnNvckl0ZW0pID0+XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICBhY3RpdmVDdXJzb3JJdGVtXG4gICAgfSk7XG5cbiAgaGFuZGxlS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IHsgY3Vyc29yIH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0Fycm93RG93bicgJiYgY3Vyc29yID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGN1cnNvcjogMFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0Fycm93VXAnIHx8IGV2ZW50LmtleSA9PT0gJ0Fycm93RG93bicpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuZHJvcERvd24oJ2Nsb3NlJyk7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgY29uc3QgY3VycmVudEl0ZW0gPSB0aGlzLnNlYXJjaFJlc3VsdHMoKVtjdXJzb3JdO1xuICAgICAgaWYgKGN1cnJlbnRJdGVtICYmICFjdXJyZW50SXRlbS5kaXNhYmxlZCkge1xuICAgICAgICB0aGlzLmFkZEl0ZW0oY3VycmVudEl0ZW0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChldmVudC5rZXkgPT09ICdBcnJvd1VwJyAmJiBjdXJzb3IgPiAwKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGUpID0+ICh7XG4gICAgICAgIGN1cnNvcjogcHJldlN0YXRlLmN1cnNvciAtIDFcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQua2V5ID09PSAnQXJyb3dVcCcgJiYgY3Vyc29yID09PSAwKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY3Vyc29yOiB0aGlzLnNlYXJjaFJlc3VsdHMoKS5sZW5ndGhcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChldmVudC5rZXkgPT09ICdBcnJvd0Rvd24nKSB7XG4gICAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGUpID0+ICh7XG4gICAgICAgIGN1cnNvcjogcHJldlN0YXRlLmN1cnNvciArIDFcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQua2V5ID09PSAnQXJyb3dEb3duJyAmJiB0aGlzLnNlYXJjaFJlc3VsdHMoKS5sZW5ndGggPT09IGN1cnNvcikge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjdXJzb3I6IDBcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICByZW5kZXJEcm9wZG93biA9ICgpID0+XG4gICAgdGhpcy5wcm9wcy5wb3J0YWwgPyAoXG4gICAgICBSZWFjdERPTS5jcmVhdGVQb3J0YWwoXG4gICAgICAgIDxEcm9wZG93biBwcm9wcz17dGhpcy5wcm9wc30gc3RhdGU9e3RoaXMuc3RhdGV9IG1ldGhvZHM9e3RoaXMubWV0aG9kc30gLz4sXG4gICAgICAgIHRoaXMuZHJvcGRvd25Sb290XG4gICAgICApXG4gICAgKSA6IChcbiAgICAgIDxEcm9wZG93biBwcm9wcz17dGhpcy5wcm9wc30gc3RhdGU9e3RoaXMuc3RhdGV9IG1ldGhvZHM9e3RoaXMubWV0aG9kc30gLz5cbiAgICApO1xuXG4gIGNyZWF0ZU5ldyA9IChpdGVtKSA9PiB7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB7XG4gICAgICBbdGhpcy5wcm9wcy5sYWJlbEZpZWxkXTogaXRlbSxcbiAgICAgIFt0aGlzLnByb3BzLnZhbHVlRmllbGRdOiBpdGVtXG4gICAgfTtcblxuICAgIHRoaXMuYWRkSXRlbShuZXdWYWx1ZSk7XG4gICAgdGhpcy5wcm9wcy5vbkNyZWF0ZU5ldyhuZXdWYWx1ZSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHNlYXJjaDogJycgfSk7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8Q2xpY2tPdXRzaWRlIG9uQ2xpY2tPdXRzaWRlPXsoZXZlbnQpID0+IHRoaXMuZHJvcERvd24oJ2Nsb3NlJywgZXZlbnQpfT5cbiAgICAgICAgPFJlYWN0RHJvcGRvd25TZWxlY3RcbiAgICAgICAgICBvbktleURvd249e3RoaXMuaGFuZGxlS2V5RG93bn1cbiAgICAgICAgICBvbkNsaWNrPXsoZXZlbnQpID0+IHRoaXMuZHJvcERvd24oJ29wZW4nLCBldmVudCl9XG4gICAgICAgICAgdGFiSW5kZXg9XCIwXCJcbiAgICAgICAgICBkaXJlY3Rpb249e3RoaXMucHJvcHMuZGlyZWN0aW9ufVxuICAgICAgICAgIHN0eWxlPXt0aGlzLnByb3BzLnN0eWxlfVxuICAgICAgICAgIHJlZj17dGhpcy5zZWxlY3R9XG4gICAgICAgICAgZGlzYWJsZWQ9e3RoaXMucHJvcHMuZGlzYWJsZWR9XG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtMSUJfTkFNRX0gJHt0aGlzLnByb3BzLmNsYXNzTmFtZX1gfVxuICAgICAgICAgIGNvbG9yPXt0aGlzLnByb3BzLmNvbG9yfT5cbiAgICAgICAgICA8Q29udGVudCBwcm9wcz17dGhpcy5wcm9wc30gc3RhdGU9e3RoaXMuc3RhdGV9IG1ldGhvZHM9e3RoaXMubWV0aG9kc30gLz5cblxuICAgICAgICAgIHt0aGlzLnByb3BzLm5hbWUgJiYgKFxuICAgICAgICAgICAgPGlucHV0IG5hbWU9e3RoaXMucHJvcHMubmFtZX0gdHlwZT1cImhpZGRlblwiIHZhbHVlPXt0aGlzLnByb3BzLnZhbHVlc30gLz5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAge3RoaXMucHJvcHMubG9hZGluZyAmJiA8TG9hZGluZyBwcm9wcz17dGhpcy5wcm9wc30gLz59XG5cbiAgICAgICAgICB7dGhpcy5wcm9wcy5jbGVhcmFibGUgJiYgKFxuICAgICAgICAgICAgPENsZWFyIHByb3BzPXt0aGlzLnByb3BzfSBzdGF0ZT17dGhpcy5zdGF0ZX0gbWV0aG9kcz17dGhpcy5tZXRob2RzfSAvPlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7dGhpcy5wcm9wcy5zZXBhcmF0b3IgJiYgKFxuICAgICAgICAgICAgPFNlcGFyYXRvciBwcm9wcz17dGhpcy5wcm9wc30gc3RhdGU9e3RoaXMuc3RhdGV9IG1ldGhvZHM9e3RoaXMubWV0aG9kc30gLz5cbiAgICAgICAgICApfVxuXG4gICAgICAgICAge3RoaXMucHJvcHMuZHJvcGRvd25IYW5kbGUgJiYgKFxuICAgICAgICAgICAgPERyb3Bkb3duSGFuZGxlXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMuc2VsZWN0LmN1cnJlbnQuZm9jdXMoKX1cbiAgICAgICAgICAgICAgcHJvcHM9e3RoaXMucHJvcHN9XG4gICAgICAgICAgICAgIHN0YXRlPXt0aGlzLnN0YXRlfVxuICAgICAgICAgICAgICBtZXRob2RzPXt0aGlzLm1ldGhvZHN9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG5cbiAgICAgICAgICB7dGhpcy5zdGF0ZS5kcm9wZG93biAmJiB0aGlzLnJlbmRlckRyb3Bkb3duKCl9XG4gICAgICAgIDwvUmVhY3REcm9wZG93blNlbGVjdD5cbiAgICAgIDwvQ2xpY2tPdXRzaWRlPlxuICAgICk7XG4gIH1cbn1cblxuU2VsZWN0LmRlZmF1bHRQcm9wcyA9IHtcbiAgYWRkUGxhY2Vob2xkZXI6ICcnLFxuICBwbGFjZWhvbGRlcjogJ1NlbGVjdC4uLicsXG4gIHZhbHVlczogW10sXG4gIG9wdGlvbnM6IFtdLFxuICBtdWx0aTogZmFsc2UsXG4gIGRpc2FibGVkOiBmYWxzZSxcbiAgc2VhcmNoQnk6ICdsYWJlbCcsXG4gIHNvcnRCeTogbnVsbCxcbiAgY2xlYXJhYmxlOiBmYWxzZSxcbiAgc2VhcmNoYWJsZTogdHJ1ZSxcbiAgZHJvcGRvd25IYW5kbGU6IHRydWUsXG4gIHNlcGFyYXRvcjogZmFsc2UsXG4gIGtlZXBPcGVuOiB1bmRlZmluZWQsXG4gIG5vRGF0YUxhYmVsOiAnTm8gZGF0YScsXG4gIGNyZWF0ZU5ld0xhYmVsOiAnYWRkIHtzZWFyY2h9JyxcbiAgZGlzYWJsZWRMYWJlbDogJ2Rpc2FibGVkJyxcbiAgZHJvcGRvd25HYXA6IDUsXG4gIGNsb3NlT25TY3JvbGw6IGZhbHNlLFxuICBkZWJvdW5jZURlbGF5OiAwLFxuICBsYWJlbEZpZWxkOiAnbGFiZWwnLFxuICB2YWx1ZUZpZWxkOiAndmFsdWUnLFxuICBjb2xvcjogJyMwMDc0RDknLFxuICBrZWVwU2VsZWN0ZWRJbkxpc3Q6IHRydWUsXG4gIGNsb3NlT25TZWxlY3Q6IGZhbHNlLFxuICBjbGVhck9uQmx1cjogdHJ1ZSxcbiAgY2xlYXJPblNlbGVjdDogdHJ1ZSxcbiAgZHJvcGRvd25Qb3NpdGlvbjogJ2JvdHRvbScsXG4gIGRyb3Bkb3duSGVpZ2h0OiAnMzAwcHgnLFxuICBhdXRvRm9jdXM6IGZhbHNlLFxuICBwb3J0YWw6IG51bGwsXG4gIGNyZWF0ZTogZmFsc2UsXG4gIGRpcmVjdGlvbjogJ2x0cicsXG4gIG5hbWU6IG51bGwsXG4gIG9uQ2hhbmdlOiAoKSA9PiB1bmRlZmluZWQsXG4gIG9uRHJvcGRvd25PcGVuOiAoKSA9PiB1bmRlZmluZWQsXG4gIG9uRHJvcGRvd25DbG9zZTogKCkgPT4gdW5kZWZpbmVkLFxuICBvbkNsZWFyQWxsOiAoKSA9PiB1bmRlZmluZWQsXG4gIG9uU2VsZWN0QWxsOiAoKSA9PiB1bmRlZmluZWQsXG4gIG9uQ3JlYXRlTmV3OiAoKSA9PiB1bmRlZmluZWQsXG4gIHNlYXJjaEZuOiAoKSA9PiB1bmRlZmluZWRcbn07XG5cbmNvbnN0IFJlYWN0RHJvcGRvd25TZWxlY3QgPSBzdHlsZWQuZGl2YFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXItcmFkaXVzOiAycHg7XG4gIHBhZGRpbmc6IDJweCA1cHg7XG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIGRpcmVjdGlvbjogJHsoeyBkaXJlY3Rpb24gfSkgPT4gZGlyZWN0aW9ufTtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWluLWhlaWdodDogMzZweDtcbiAgJHsoeyBkaXNhYmxlZCB9KSA9PlxuICAgIGRpc2FibGVkID8gJ2N1cnNvcjogbm90LWFsbG93ZWQ7cG9pbnRlci1ldmVudHM6IG5vbmU7b3BhY2l0eTogMC4zOycgOiAncG9pbnRlci1ldmVudHM6IGFsbDsnfVxuXG4gIDpob3ZlciwgXG4gIDpmb2N1cy13aXRoaW4ge1xuICAgIGJvcmRlci1jb2xvcjogJHsoeyBjb2xvciB9KSA9PiBjb2xvcn07XG4gIH1cblxuICA6Zm9jdXMsXG4gIDpmb2N1cy13aXRoaW4ge1xuICAgIG91dGxpbmU6IDA7XG4gICAgYm94LXNoYWRvdzogMCAwIDAgM3B4ICR7KHsgY29sb3IgfSkgPT4gaGV4VG9SR0JBKGNvbG9yLCAwLjIpfTtcbiAgfVxuYDtcblxuZXhwb3J0IGRlZmF1bHQgU2VsZWN0O1xuIl19 */")),_default=Select;exports.default=_default;